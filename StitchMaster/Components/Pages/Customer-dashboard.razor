@using  StitchMaster;
@using StitchMaster.Components.RazorComponents
@using StitchMaster.BusinessLogic
@using StitchMaster.DataLayer
@inject UserStateService UserState


@page "/customer-dashboard"
<div class="container-fluid py-4">
    <h3 class="mb-4">Welcome
        @if(UserState.Email != null)
        {
            @UserData.GetUserByEmail(UserState.Email).FullName
        }
    </h3>

    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">Our Famous Tailors</h5>
            <a href="tailors" class="text-decoration-none text-secondary fw-semibold">See More</a>
        </div>

        <div class="d-flex flex-wrap gap-5">
            @foreach(TailorGig gig in gigs)
            {
                <GigCard
                Name=@gig.GigTitle
                GigId=@gig.GigID
                Description=@gig.GigDescription
                Rating="4.8"
                GigImageUrl=@gig.ImageURLs
                Icon="bi bi-scissors"
                AvatarUrl =@(gig.GigCategory.Gender == "M" ? "Avatar1.jpg" : "Avatar2.svg")
                  />
            }

        </div>
    </section>

    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">Featured Products</h5>
            <a href="fabrics" class="text-decoration-none text-secondary fw-semibold">See More</a>
        </div>

        <div class="d-flex flex-wrap gap-4">
            <ProductCard ProductImageUrl="./product1.jpg"
            ProductId="12"
            ProductName="Embroidered Lawn Suit"
            Description="High-quality lawn with intricate embroidery. 3-piece."
            Price="49"
            Category="Women"
            SellerName="Sarah Tailor"
            SellerAvatarUrl="./product1.jpg" />

            <ProductCard ProductImageUrl="./product2.jpg"
            ProductName="Men's Cotton Kurta"
            ProductId="34"
            Description="Premium stitched kurta for summer."
            Price="29"
            Category="Men"
            SellerName="Ali Stitchers"
            SellerAvatarUrl="./product2.jpg" />
        </div>

    </section>

</div>

@code {
    // You can add any additional logic or properties here if needed
    List<TailorGig> gigs;
    protected override void OnInitialized()
	{
		// Simulate loading the gigs from DB or service
		gigs = LoadGigs();
	}
	private List<TailorGig> LoadGigs()
	{
		// You will fetch from DB/service — this is just demo data
		return TailorGigData.Instance.GetAllGigs();
	}
}